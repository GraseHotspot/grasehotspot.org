{"componentChunkName":"component---node-modules-rocketseat-gatsby-theme-docs-core-src-templates-docs-query-js","path":"/2011/04/30/strange-networking-woes","result":{"data":{"mdx":{"id":"a7d705cc-80ce-5bf7-910c-adb3e955d059","excerpt":"So today is the first day of  Auscon . The organisers have choosen to use GRASE Hotspot to manage Internet access at the venue. The machine running the hotspotâ€¦","fields":{"slug":"/2011/04/30/strange-networking-woes/"},"frontmatter":{"title":"Strange Networking Woes","description":null,"image":null,"disableTableOfContents":null},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Strange Networking Woes\",\n  \"date\": \"2011-04-30T16:10:07+10:00\",\n  \"status\": \"publish\",\n  \"permalink\": \"/2011/04/30/strange-networking-woes\",\n  \"author\": \"tim\",\n  \"excerpt\": \"\",\n  \"type\": \"post\",\n  \"id\": 88,\n  \"category\": [\"News\"],\n  \"tag\": [\"issue\", \"network\", \"squid\"],\n  \"post_format\": []\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"So today is the first day of \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://www.auscongames.com.au\"\n  }, \"Auscon\"), \". The organisers have choosen to use GRASE Hotspot to manage Internet access at the venue. The machine running the hotspot had been tested at an alternative site successfully, and the interface modified slightly to suit the event. (Which won\\u2019t need to be done as much with some new changes in the next version)\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"However, the day didn\\u2019t look good with the hotspot not functioning properly. Everything BUT WWW (http, port 80) traffic was working. Investigating Squid showed that it was attempting to connect to 1.0.0.0, which most keen observers would notice is a network address not a device address. Strangely enough, squid was trying to connect to 1.0.0.0 via ipv6! It was thinking it was an ipv6 address.\"), mdx(\"p\", null, \"The quick solution was in to install dnsmasq on the hotspot machine, and point it to a public DNS server I know to be working, and restart squid with it using the local dnsmasq instance. Everything is good now.\"), mdx(\"p\", null, \"But is that the real issue? There is an overlapping netmask. Coova Chilli is setup to use 10.0.0.0/24 (so 10.0.0.1-254) for it\\u2019s addresses. However, the upstream network interface was setup on a 10.0.0.0/8 which overlaps the Coova Chilli network. It\\u2019s very possible that this overlap is causing problems. An example of a squid log message when the problem occurs is below.\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"GET http://api.twitter.com/1/direct_messages.xml? - DIRECT/1.0.0.0 text/html\")), mdx(\"p\", null, \"So maybe if you are pulling your hair out, try changing the upstream network if you can. It could also be the upstream DNS (adsl modem) returning faulty values.\"), mdx(\"ins\", {\n    dateTime: \"2011-04-30T22:57:27+00:00\"\n  }, \"Edit: So on follow up, the overlapping netmasks aren\\u2019t the issue. Yes, if there was something on the upstream network that was in the overlap range, then it would be inaccessible to hosts behind the hotspot. However, this issue was caused by the upstream DNS server. I believe it is a dlink running dproxy, which has a bug that causes it to start returning 1.0.0.0 after it gets an ipv6 dns request or something like that. Of course, this then caused squid to try and contact 1.0.0.0 as that was what the DNS had resolved to, which of course leads to a timeout. Forcing the hotspot to use the local dnsmasq with a known good public DNS server fixes the problem as we bypass the faulty DNS proxy upstream.\"));\n}\n;\nMDXContent.isMDXComponent = true;","headings":[]}},"pageContext":{"slug":"/2011/04/30/strange-networking-woes/","next":{"label":"About","link":"/about"},"repositoryEditUrl":"https://github.com/GraseHotspot/grasehotspot.org/tree/main/src/docs/2011/04/30/strange-networking-woes.md","repositoryProvider":"GitHub"}},"staticQueryHashes":["1954253342","2328931024","2501019404","973074209"]}